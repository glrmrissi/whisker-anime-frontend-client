<app-header></app-header>

<main class="wrapper">
    <section class="left-section">
        <app-profile-avatar [imageUrlInput]="profile()?.avatarUrl ?? undefined"
            (avatarUpdated)="refreshData()"></app-profile-avatar>
    </section>
    <section class="right-section">
        <div class="profile-info">
            @if(disabledInput) {
            <div class="btn-edit-wrapper">
                <span class="content-wrapper">
                    <fa-icon [icon]="faUserShield"></fa-icon>
                    <h2>{{profile()?.nickName}}</h2>
                </span>
                <button class="edit-profile-btn" [hidden]="hiddenEditButton" (click)="enableInputs()">
                    <fa-icon [icon]="faEdit"></fa-icon> Edit Profile
                </button>
            </div>
            <hr>
            <p>{{profile()?.bio}}</p>
            <div class="favorites-animes">
                <h1>Favorite Animes:</h1>
                @for(animes of profile()?.favoriteAnimes ; track animes) {
                <span class="anime-badge">{{ animes }}</span>
                }
            </div>

            <div class="btn-edit-wrapper" [hidden]="!hiddenEditButton">
                <button class="edit-profile-btn" (click)="saveEdits()">
                    <fa-icon [icon]="faSave"></fa-icon> Save
                </button>
            </div>
            }

            @if(!disabledInput) {
            <form [formGroup]="editUserGroup" (ngSubmit)="onSubmit()">
                <div class="btn-edit-wrapper">
                    <span class="content-wrapper">
                        <fa-icon [icon]="faUserShield"></fa-icon>
                        <input type="text" placeholder="Nickname" formControlName="nickName"
                            >
                    </span>
                </div>
                <hr>
                <textarea name="Bio" formControlName="bio" maxlength="300" placeholder="Bio:">
                    Enter your comments here (max 300 characters)...
                </textarea>
                <div class="favorites-animes">
                    <h1>Favorite Animes:</h1>
                    @for(animes of profile()?.favoriteAnimes ; track animes) {
                    <span class="anime-badge">{{ animes }}</span>
                    }
                </div>

                <div class="btn-edit-wrapper" [hidden]="!hiddenEditButton">
                    <button class="edit-profile-btn" type="submit">
                        <fa-icon [icon]="faSave"></fa-icon> Save
                    </button>
                </div>
            </form>
            }
        </div>
    </section>
</main>